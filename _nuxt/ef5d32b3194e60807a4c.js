(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{158:function(e,t,n){"use strict";var r={props:{colour:{type:String}},data:function(){return{blockquoteClass:"{-background bg-".concat(this.colour,"-100 -} {-border border-l-4 border-").concat(this.colour,"-500 -} {-spacing my-4 p-4 -}")}}},o=n(17),component=Object(o.a)(r,function(){var e=this.$createElement;return(this._self._c||e)("blockquote",{class:this.blockquoteClass},[this._t("default")],2)},[],!1,null,null,null);t.a=component.exports},159:function(e,t,n){"use strict";var r={data:function(){return{preClass:"{-display overflow-x-scroll -} {-typography text-sm -} {-background bg-gray-200 -} {-border border-l-4 rounded-r-lg border-gray-600 -} {-sizing -} {-spacing my-4 p-2 -}"}}},o=n(17),component=Object(o.a)(r,function(){var e=this.$createElement,t=this._self._c||e;return t("pre",{class:this.preClass},[this._v("  "),t("code",[this._t("default")],2),this._v("\n")])},[],!1,null,null,null);t.a=component.exports},160:function(e,t,n){"use strict";var r=n(17),component=Object(r.a)({},function(){var e=this.$createElement;return(this._self._c||e)("section",{staticClass:"{-spacing pb-4 -}"},[this._t("default")],2)},[],!1,null,null,null);t.a=component.exports},161:function(e,t,n){"use strict";var r=n(17),component=Object(r.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h2",{staticClass:"{-typography text-xl -} {-spacing pt-6 pb-2"},[this._t("default")],2),this._v(" "),t("hr",{staticClass:"{-border border-b border-gray-400 -} {-spacing mb-4 -}"})])},[],!1,null,null,null);t.a=component.exports},162:function(e,t,n){"use strict";var r=n(17),component=Object(r.a)({},function(){var e=this.$createElement;return(this._self._c||e)("h1",{staticClass:"{-typography text-3xl -}"},[this._t("default")],2)},[],!1,null,null,null);t.a=component.exports},164:function(e,t,n){"use strict";var r=n(163),o=[];window.addEventListenerBase||(window.addEventListenerBase=window.addEventListener,window.addEventListener=function(e,t){o.push({type:e,listener:t}),window.addEventListenerBase(e,t)},window.removeEventListeners=function(e){for(var t=0;t!==o.length;t++){var n=o[t],r=n.listener,c=n.type;c===e&&window.removeEventListener(c,r)}}),t.a=function(){for(var e in r.DOM.Event.$events)window.removeEventListeners(e)}},165:function(e,t,n){"use strict";function r(e){"running"!==e.state&&(window.addEventListener("click",function(){"running"!==e.state&&e.resume(),console.log(e.state)}),window.addEventListener("touch",function(){"running"!==e.state&&e.resume(),console.log(e.state)}))}n.d(t,"a",function(){return r})},166:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=166},176:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=176},178:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=178},183:function(e,t,n){"use strict";n.r(t);n(173);var r=n(163),o=n(164),c=n(165),l=(n(69),n(37),n(27),n(18),n(54),n(55),n(171)),d=n(49);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable})),t.push.apply(t,n)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(source,!0).forEach(function(t){Object(d.a)(e,t,source[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(source).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))})}return e}var v="play",y="stop",h="tick",w="add-step",O="rmv-step",E="tgl-step",C="reset-steps",A="mute-toggle",j="change-waveform",_="change-delay";function x(e,t){var n=e.action,r=e.payload;if(!n)return t;switch(n){case v:var o=f({},t.sequencer,{running:!0,step:t.sequencer.running?t.sequencer.step:t.sequencer.step-1});return f({},t,{sequencer:o});case y:var c=f({},t.sequencer,{running:!1});return f({},t,{sequencer:c});case h:var time=r.time,d=(t.sequencer.step+1)%t.sequencer.stepCount,m=f({},t.sequencer,{step:d});return f({},t,{currentTime:time,sequencer:m});case w:var x=t.sequencer.stepCount+1,k=t.sequencer.rows.map(function(e){return f({},e,{steps:[].concat(Object(l.a)(e.steps),[!1])})}),D=f({},t.sequencer,{rows:k,stepCount:x});return f({},t,{sequencer:D});case O:var N=t.sequencer.stepCount>4?t.sequencer.stepCount-1:t.sequencer.stepCount,M=t.sequencer.rows.map(function(e){return f({},e,{steps:e.steps.slice(0,N)})}),T=f({},t.sequencer,{rows:M,stepCount:N});return f({},t,{sequencer:T});case E:var P=r.note,L=r.step,S=t.sequencer.rows.map(function(e){return e.name==P?f({},e,{steps:e.steps.map(function(a,i){return L==i?!a:a})}):e}),G=f({},t.sequencer,{rows:S});return f({},t,{sequencer:G});case C:var U=t.sequencer.rows.map(function(e){return f({},e,{steps:e.steps.map(function(){return!1})})}),$=f({},t.sequencer,{rows:U});return f({},t,{sequencer:$});case A:return f({},t,{synth:f({},t.synth,{masterGain:1==t.synth.masterGain?0:1})});case j:var F=r.type,B=f({},t.synth,{type:F});return f({},t,{synth:B});case _:var H=r.time,I=f({},t.synth,{delayTime:"long"===H?1:.2});return f({},t,{synth:I});default:return console.warn("Unhandled action: ".concat(n)),t}}var audio=n(175),k=audio.Node.biquadFilter,D=audio.Node.dac,N=audio.Node.gain,M=audio.Node.oscillator,T=audio.Node.ref,P=audio.Property.delayTime,L=audio.Property.frequency,S=audio.Property.gain,G=audio.Property.linearRampToValueAtTime,U=audio.Property.type;function $(e){var t=e.currentTime,n=e.sequencer,r=e.synth;return[audio.Keyed.delay("delay",[P(r.delayTime)],[N([S(r.delayAmount)],[k([U("lowpass"),L(400)],[T("delay"),T("master")])])]),audio.Keyed.gain("master",[S(r.masterGain)],[D()])].concat(Object(l.a)(n.rows.map(F(t,n.step,r))))}var F=function(e,t,n){return function(r){var o=r.note,c=r.steps,l=n.attack,d=n.decay,m=n.type,f=c[t]?.2:0,v=G(S(f),e+l),y=G(S(0),e+l+d);return M([L(o),U(m)],[N([v,y],[T("delay"),T("master")])])}},B=n(177);function view(e){var t=e.sequencer,n=e.synth,r=H(["container","font-mono","mx-auto py-6 px-4"]);return B.Element.main([r],[B.Element.section([],[I("play","gray",[],["play"]),I("stop","gray",[],["stop"]),I("add-step","gray",[],["add step"]),I("rmv-step","gray",[],["remove step"]),I("reset-steps","orange",[],["reset steps"])]),B.Element.section([],[B.Element.h2([B.Attribute.className("text-lg font-bold")],["Synth controls:"]),I("mute-toggle","gray",[],[1==n.masterGain?"mute":"unmute"])]),B.Element.section([],[B.Element.h2([B.Attribute.className("text-lg font-bold")],["Current step: ".concat(t.step)]),W(t.rows,t.step)]),B.Element.section([],[B.Element.h2([B.Attribute.className("text-lg font-bold")],["Waveform:"]),I("","blue",[B.Attribute.dataCustom("waveform","sine")],["sine"]),I("","green",[B.Attribute.dataCustom("waveform","triangle")],["triangle"]),I("","red",[B.Attribute.dataCustom("waveform","sawtooth")],["sawtooth"]),I("","yellow",[B.Attribute.dataCustom("waveform","square")],["square"])]),B.Element.section([],[B.Element.h2([B.Attribute.className("text-lg font-bold")],["Delay time:"]),I("delay-short","purple",[B.Attribute.dataCustom("delay","short")],["short"]),I("delay-long","purple",[B.Attribute.dataCustom("delay","long")],["long"])])])}var H=function(e){return B.Attribute.className(e.filter(function(e){return""!==e}).join(" "))},I=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o="text-white",c="bg-".concat(t,"-600 hover:bg-").concat(t,"-800"),d="border-4 border-gray-900",m="p-2 mr-4 my-2",f=H([o,c,d,m]);return B.Element.button([].concat(Object(l.a)(n),[f,B.Attribute.id(e)]),Object(l.a)(r))},W=function(e,t){var n=H(["overflow-x-scroll","border-4 border-gray-900","my-4","w-auto"]);return B.Element.div([n],Object(l.a)(e.map(J(t))))},J=function(e){return function(t){var n=t.name,r=t.steps,o=H(["flex","items-center"]);return B.Element.div([o],[B.Element.span([B.Attribute.className("pl-2 pr-6 font-bold")],[n])].concat(Object(l.a)(r.map(K(n,e)))))}},K=function(e,t){return function(n,i){var r="bg-gray-".concat(n?"900":"600"," hover:bg-gray-800"),o=H(["text-white",r,"border-4 border-gray-900","py-4 px-6"]);return B.Element.div([B.Attribute.className("p-2 bg-".concat(t==i?"gray-300":"transparent"))],[B.Element.button([B.Attribute.dataCustom("step","".concat(i)),B.Attribute.dataCustom("note",e),o])])}};function z(e){var t=[r.DOM.Event.click("#play",function(){return Object(r.Action)(v)}),r.DOM.Event.click("#stop",function(){return Object(r.Action)(y)}),r.DOM.Event.click("#add-step",function(){return Object(r.Action)(w)}),r.DOM.Event.click("#rmv-step",function(){return Object(r.Action)(O)}),r.DOM.Event.click("#reset-steps",function(){return Object(r.Action)(C)}),r.DOM.Event.click("#mute-toggle",function(){return Object(r.Action)(A)}),r.DOM.Event.click("[data-step][data-note]",function(e){var t=e.target.dataset,n=t.note,o=t.step;return Object(r.Action)(E,{note:n,step:o})}),r.DOM.Event.click("[data-waveform]",function(e){var t=e.target.dataset.waveform;return Object(r.Action)(j,{type:t})}),r.DOM.Event.click("[data-delay]",function(e){var t=e.target.dataset.delay;return Object(r.Action)(_,{time:t})})];return e.sequencer.running&&t.push(r.Audio.Event.every("tick",e.sequencer.stepInterval,function(time){return Object(r.Action)(h,{time:time})})),t}var R,V,Y=window.AudioContext||window.webkitAudioContext;function Q(){return{currentTime:0,sequencer:{rows:["C5","B4","A4","G4","F4","E4","D4","C4"].map(function(e){return function(e,t,n){return{note:e,name:t,steps:Array(n).fill(!1)}}(r.Music.Note.ntof(e),e,8)}),running:!1,step:0,stepCount:8,stepInterval:r.Music.Time.sec(150,r.Music.Time.Eighth),tempo:150},synth:{attack:0,decay:.2,type:"sine",delayTime:1,delayAmount:.2,masterGain:0}}}var X=function(e){V=new Y,Object(c.a)(V),(R=r.Program.instrument(Q,x,$,view,z)).use(r.DOM.Event),R.use(r.Audio.Event),R.start({root:document.querySelector(e),context:V,flags:{}})},Z=function(){R.destroy(),Object(o.a)(),V.close()},ee=n(162),te=n(161),ne=n(160),re=n(159),oe=n(158),se={components:{ContentHeading:ee.a,ContentSubHeading:te.a,ContentSection:ne.a,ContentCode:re.a,ContentNotice:oe.a},mounted:function(){X("#flow")},beforeDestroy:function(){Z()}},ae=n(17),component=Object(ae.a)(se,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("content-heading",[e._v("01-step-sequencer")]),e._v(" "),n("content-section",[n("content-sub-heading"),e._v("\n    Here's a simple polysynth. You can use the top row of your keyboard to\n    play some notes!\n\n    "),n("div",{staticClass:"border-4 my-4 p-2 border-gray-900",attrs:{id:"flow"}})],1),e._v(" "),n("content-section",[e._v("\n    While we won't break down the whole app like we did with the polysynth\n    example, below is the init function for this step sequencer. Notice how\n    relatively simple the returned Model is; remember this is used to generate\n    both the audio and the view for our step sequencer! \n\n    "),n("content-code",[e._v("\n      function init () {\n        const row = (note, name, length) => ({ note, name, steps: Array(length).fill(false) })\n\n        const numSteps = 8\n        const notes = [ 'C5', 'B4', 'A4', 'G4', 'F4', 'E4', 'D4', 'C4' ] \n        const bpm = 150\n\n        return {\n          currentTime: 0,\n          sequencer: {\n            rows: notes.map(note => row(Music.Note.ntof(note), note, numSteps)),\n            running: false,\n            step: 0,\n            stepCount: numSteps,\n            stepInterval: Music.Time.sec(bpm, Music.Time.Eighth),\n            tempo: bpm,\n          },\n          synth: {\n            attack: 0,\n            decay: 0.2,\n            type: 'sine',\n            delayTime: 1,\n            delayAmount: 0.2,\n            masterGain: 0\n          },\n        }\n      }\n    ")])],1),e._v(" "),n("div",{staticClass:"{-typography text-right text-indigo-500 hover:text-indigo-800 -} {-spacing my-4 -}"},[n("nuxt-link",{attrs:{to:"/guide/hello-world"}},[e._v("Hello World")]),e._v(" »\n  ")],1)],1)},[],!1,null,null,null);t.default=component.exports}}]);